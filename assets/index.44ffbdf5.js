import{_ as V,K as N,L,O as it,H as st}from"./index.ad695817.js";import{aI as S,ba as nt,df as rt,bj as ot,ca as ct,bi as B,b as r,bh as mt,bb as k,bc as lt,aT as i,bd as ut,dg as _t,bs as C,dh as M,di as j}from"./vendor.9dfca3cc.js";import{a as y}from"./vendor_axios.5abceb0c.js";import{u as dt}from"./vendor_react_hook_form.90e3307f.js";import"./vendor_react_epic_spinners.bbaea7d4.js";import"./vendor_mui_datatables.3afb61c8.js";import"./vendor_lodash.872a697f.js";import"./vendor_react_slick.b9cbcc15.js";import"./vendor_react_easy_edit.1ec3282f.js";import"./vendor_react_player.58c4554f.js";import"./vendor_core_js_pure.26d1b0db.js";const ht=S.lazy(()=>V(()=>import("./index.52cd18ec.js"),["assets/index.52cd18ec.js","assets/vendor.9dfca3cc.js","assets/vendor.e8bc3cfc.css","assets/vendor_core_js_pure.26d1b0db.js","assets/vendor_react_hook_form.90e3307f.js"])),gt=S.lazy(()=>V(()=>import("./index.1b8101b7.js"),["assets/index.1b8101b7.js","assets/vendor.9dfca3cc.js","assets/vendor.e8bc3cfc.css","assets/vendor_core_js_pure.26d1b0db.js","assets/vendor_axios.5abceb0c.js","assets/vendor_react_hook_form.90e3307f.js","assets/index.ad695817.js","assets/index.aa1dc235.css","assets/vendor_react_epic_spinners.bbaea7d4.js","assets/vendor_mui_datatables.3afb61c8.js","assets/vendor_lodash.872a697f.js","assets/vendor_react_slick.b9cbcc15.js","assets/vendor_react_easy_edit.1ec3282f.js","assets/vendor_react_player.58c4554f.js"])),pt=nt(s=>({root:{paddingTop:s.spacing(4),paddingBottom:s.spacing(2),display:"flex",flexDirection:"column",textAlign:"center"},container:{maxWidth:500,backgroundColor:s.palette.background.default},spacing:{paddingBottom:s.spacing(.5)},text:{marginTop:s.spacing(.5)},date:{maxWidth:400,paddingTop:s.spacing(-2),paddingBottom:s.spacing(1)}})),Ot=()=>{const s=pt(),I=rt(),z=ot(),F=ct(),{studentData:U,enrollmentKey:E,studentId:P="",partner:o}=B(t=>t.onlineTest),{lang:x}=B(t=>t.ui),{firstName:R,middleName:W,lastName:H,mobileNumber:J}=U||{firstName:null,middleName:null,lastName:null,mobileNumber:null},{register:w,handleSubmit:K,formState:{errors:O},control:q,setValue:G,watch:Q,reset:$}=dt(),[l,X]=r.exports.useState(!1),[n,A]=r.exports.useState(0),{enqueueSnackbar:u}=mt(),[T,Y]=r.exports.useState(!1),[a,_]=r.exports.useState({ProfileImage:"",FirstName:R||"",MiddleName:W||"",email:"",LastName:H||"",whatsapp:J||"",AlternateNumber:"",gender:"",dob:"",gps_lat:"-1",gps_long:"-1",PrevImage:"",district:"",pin_code:"",state:"",city:"",current_status:"",qualification:"",school_medium:"",caste:"",religion:"",math_marks_in10th:"",percentage_in10th:"",math_marks_in12th:"",percentage_in12th:""}),Z=t=>{const e=new FormData;e.append("file",t),y.post(`${N}on_assessment/details/photo/${E}`,e).then(()=>{u("Photo Uploaded Successfully",{variant:"success"})}).catch(()=>{u("Please Provide Valid Image File",{variant:"error"})})},D=t=>{_({...a,ProfileImage:t}),Z(t)},d={1:"female",2:"male",3:"other"},h=["","obc","scSt","general","others"],g=["","lessThan10th","class10th","class12th","graduate","ba","bcom","mcom","msc","bca","bsc","bba"],p=["","hindu","islam","sikh","jain","christian","others"],f=["","nothing","job","study","other"],b=["","en","other"];r.exports.useEffect(()=>{},[]),r.exports.useEffect(()=>{const t=JSON.parse(window.sessionStorage.getItem("formData"));let e=window.sessionStorage.getItem("formData")||{};Object.keys(e).length>0&&(Y(!0),_({...a,PrevImage:t.image_url,FirstName:t.name.split(" ")[0],MiddleName:t.name.split(" ")[1],LastName:t.name.split(" ")[2],email:t.email,whatsapp:t.contacts[0].mobile,AlternateNumber:t.contacts[1]&&t.contacts[1].alt_mobile,dob:t.dob,gender:d[t.gender],district:t.district,pin_code:t.pin_code,state:t.state,city:t.city,current_status:f[t.current_status],qualification:g[t.qualification],school_medium:b[t.school_medium],caste:h[t.caste],religion:p[t.religon],math_marks_in10th:t.math_marks_in10th,percentage_in10th:t.percentage_in10th,math_marks_in12th:t.math_marks_in12th,percentage_in12th:t.percentage_in12th}),$({PrevImage:t.image_url,FirstName:t.name.split(" ")[0],MiddleName:t.name.split(" ")[1],LastName:t.name.split(" ")[2],email:t.email,whatsapp:t.contacts[0].mobile,AlternateNumber:t.contacts[1]&&t.contacts[1].alt_mobile,dob:t.dob,gender:d[t.gender],district:t.district,pin_code:t.pin_code,state:t.state,city:t.city,current_status:f[t.current_status],qualification:g[t.qualification],school_medium:b[t.school_medium],caste:h[t.caste],religion:p[t.religon],math_marks_in10th:t.math_marks_in10th,percentage_in10th:t.percentage_in10th,math_marks_in12th:t.math_marks_in12th,percentage_in12th:t.percentage_in12th}))},[]),r.exports.useEffect(()=>{P&&y.get(`${N}/students/${P}`).then(t=>{if(t.data.data.length>0){const e=t.data.data[0];X(!0),window.sessionStorage.setItem("formData",JSON.stringify(e)),_({...a,PrevImage:e.image_url,FirstName:e.name.split(" ")[0],MiddleName:e.name.split(" ")[1],LastName:e.name.split(" ")[2],email:e.email,whatsapp:e.contacts[0].mobile,AlternateNumber:e.contacts[1]&&e.contacts[1].alt_mobile,dob:e.dob,gender:d[e.gender],district:e.district,pin_code:e.pin_code,state:e.state,city:e.city,current_status:f[e.current_status],qualification:g[e.qualification],school_medium:b[e.school_medium],caste:h[e.caste],religion:p[e.religon],math_marks_in10th:e.math_marks_in10th,percentage_in10th:e.percentage_in10th,math_marks_in12th:e.math_marks_in12th,percentage_in12th:e.percentage_in12th}),$({PrevImage:e.image_url,FirstName:e.name.split(" ")[0],MiddleName:e.name.split(" ")[1],LastName:e.name.split(" ")[2],email:e.email,whatsapp:e.contacts[0].mobile,AlternateNumber:e.contacts[1]&&e.contacts[1].alt_mobile,dob:e.dob,gender:d[e.gender],district:e.district,pin_code:e.pin_code,state:e.state,city:e.city,current_status:f[e.current_status],qualification:g[e.qualification],school_medium:b[e.school_medium],caste:h[e.caste],religion:p[e.religon],math_marks_in10th:e.math_marks_in10th,percentage_in10th:e.percentage_in10th,math_marks_in12th:e.math_marks_in12th,percentage_in12th:e.percentage_in12th})}})},[]);const c=(()=>[{en:"Basic Details",hi:"\u092C\u0941\u0928\u093F\u092F\u093E\u0926\u0940 \u091C\u093E\u0928\u0915\u093E\u0930\u0940",ma:"\u092E\u0942\u0932\u092D\u0942\u0924 \u092E\u093E\u0939\u093F\u0924\u0940"},{en:"Other Details",hi:"\u0905\u0928\u094D\u092F \u091C\u093E\u0928\u0915\u093E\u0930\u0940",ma:"\u0907\u0924\u0930 \u092E\u093E\u0939\u093F\u0924\u0940"}])(),v=t=>{const e={name:t.name,email:t.email,whatsapp:t.whatsapp,dob:t.dob,gender:t.gender,gps_lat:t.gps_lat,gps_long:t.gps_long,partner_refer:t.partner_refer,qualification:t.qualification,state:t.state,district:t.district,city:t.city,current_status:t.current_status,school_medium:t.school_medium,pin_code:t.pin_code,caste:t.caste,religon:t.religion,percentage_in10th:t.percentage_in10th?t.percentage_in10th:"",math_marks_in10th:t.math_marks_in10th,math_marks_in12th:t.math_marks_in12th,percentage_in12th:t.percentage_in12th?t.percentage_in12th:""};t.alt_mobile&&(e.alt_mobile=t.alt_mobile),l?y.put(`${N}students/updateDetails/${P}`,{gender:t.gender,gps_lat:t.gps_lat,gps_long:t.gps_long,partner_refer:t.partner_refer,qualification:t.qualification,state:t.state,district:t.district,city:t.city,current_status:t.current_status,school_medium:t.school_medium,pin_code:t.pin_code,caste:t.caste,religon:t.religion,percentage_in10th:"string",math_marks_in10th:0,percentage_in12th:"string",math_marks_in12th:0}).then(()=>{F("/test/finalinstruction/",{})}):y.post(`${N}on_assessment/details/${E}`,e).then(m=>{z(st(m.data.details.id)),F("/test/finalinstruction/",{})}).catch(()=>{u("Please fill all the fields properly",{variant:"error"})})},tt=(t,e)=>{if(e.preventDefault(),_(m=>({...m,...t})),n===0&&!a.PrevImage&&!a.ProfileImage){u("Please provide a Profile Picture",{variant:"error"});return}if(n>=c.length-1){v({name:`${t.FirstName} ${t.MiddleName} ${t.LastName}`,alt_mobile:t.AlternateNumber,partner_refer:"NONE",image_url:a.ProfileImage,gps_lat:a.gps_lat?a.gps_lat:"",gps_long:a.gps_long?a.gps_lat:"",math_marks_in10th:a.math_marks_in10th?a.math_marks_in10th:"",math_marks_in12th:a.math_marks_in12th?a.math_marks_in12th:"",...t});return}A(m=>m+1)},et=()=>{A(t=>t-1)},at=t=>{switch(t){case 0:return i(S.Suspense,{fallback:i(L,{}),children:i(ht,{lang:x,formData:a,reactForm:{register:w,errors:O,control:q},inputDisabled:l||T,pfpCompulsion:!it.includes(o==null?void 0:o.slug),setProfileImage:D})});case 1:return i(S.Suspense,{fallback:i(L,{}),children:i(gt,{formData:{name:`${a.FirstName} ${a.MiddleName} ${a.LastName}`,alt_mobile:a.AlternateNumber,partner_refer:"NONE",image_url:a.ProfileImage,...a},reactForm:{register:w,errors:O,control:q,watch:Q,setValue:G},lang:x,alreadyAUser:l,partnerSlug:o==null?void 0:o.slug,inputDisabled:l||T})});default:return i("div",{})}};return k(lt,{className:s.root,maxWidth:"sm",children:[i(ut,{variant:"h5",className:s.text,children:c[n][x]}),k("form",{style:{paddingTop:"2.0rem"},noValidate:!0,onSubmit:K(tt),children:[at(n),i(_t,{style:{marginTop:"1.6rem"},variant:"dots",position:"static",steps:c.length,activeStep:n,nextButton:k(C,{size:"medium",type:"submit",variant:n===c.length-1?"contained":"text",color:"primary",children:[n===c.length-1?"Submit Data":"Next",I.direction==="rtl"?i(M,{}):i(j,{})]}),backButton:k(C,{size:"medium",onClick:et,disabled:n===0,children:[I.direction==="rtl"?i(j,{}):i(M,{}),"Back"]})})]})]})};export{Ot as default};
